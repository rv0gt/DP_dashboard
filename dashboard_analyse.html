<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Dashboard - Home</title>
    <!-- Shared CSS -->
    <link rel="stylesheet" href="./shared/css/common.css">
</head>
<body>
    <!-- Navigation wird via includes.js eingefÃ¼gt -->
    <div id="nav-placeholder"></div>

    <section class="hero hero-large">
        <div class="hero-content">
            <div class="hero-container">
                <h1>Trading Dashboard</h1>
                <p>Ãœbersicht aller Handelsstrategien & Systeme</p>
            </div>
        </div>
    </section>

    <section class="server-status-section">
        <div class="server-status-container">
            <div class="server-status-header">
                <div class="pulse-indicator" id="pulse-indicator"></div>
                <h3>Server Status</h3>
            </div>
            <div class="server-status" id="server-status">
                <div class="status-tile">
                    <div class="label">Gateway</div>
                    <div class="value offline"><span class="status-icon"></span> Laden...</div>
                </div>
            </div>
        </div>
    </section>

    <section class="strategies-section">
        <div class="container">
            <h2 class="section-title">Strategien</h2>

            <div class="strategies-grid">
                <a href="paper_strategie_1/overview.html" class="strategy-card">
                    <div class="strategy-icon">ðŸ“Š</div>
                    <h3>Paper Strategie 1</h3>
                    <p>MES Futures Trading mit automatischer Hebelsteuerung und Rollover-Management</p>
                    <span class="strategy-status status-active" id="strategy1-status">Aktiv</span>
                </a>

                <div class="strategy-card" style="opacity: 0.5; cursor: not-allowed;">
                    <div class="strategy-icon">ðŸ”’</div>
                    <h3>Strategie 2</h3>
                    <p>Weitere Strategie in Planung</p>
                    <span class="strategy-status status-inactive">Inaktiv</span>
                </div>

                <div class="strategy-card" style="opacity: 0.5; cursor: not-allowed;">
                    <div class="strategy-icon">ðŸ”’</div>
                    <h3>Strategie 3</h3>
                    <p>Weitere Strategie in Planung</p>
                    <span class="strategy-status status-inactive">Inaktiv</span>
                </div>
            </div>

            <div class="section-divider"></div>

            <h2 class="section-title">Daten & Analyse</h2>

            <div class="strategies-grid">
                <a href="ib_analysis/download_analyse/download_analyse.html" class="strategy-card">
                    <div class="strategy-icon">ðŸ“‰</div>
                    <h3>Interactive Brokers</h3>
                    <p>Fehleranalyse der historischen Minutendaten und Download-Ãœberwachung</p>
                    <span class="strategy-status status-active" id="ib-status">Aktiv</span>
                </a>

                <div class="strategy-card" style="opacity: 0.5; cursor: not-allowed;">
                    <div class="strategy-icon">ðŸ”’</div>
                    <h3>Analyse 2</h3>
                    <p>Weitere Auswertung in Planung</p>
                    <span class="strategy-status status-inactive">Inaktiv</span>
                </div>

                <div class="strategy-card" style="opacity: 0.5; cursor: not-allowed;">
                    <div class="strategy-icon">ðŸ”’</div>
                    <h3>Analyse 3</h3>
                    <p>Weitere Auswertung in Planung</p>
                    <span class="strategy-status status-inactive">Inaktiv</span>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>Trading Dashboard Â· Automatisierte StrategieÃ¼berwachung</p>
    </footer>

    <!-- Shared JavaScript -->
    <script src="./shared/js/includes.js"></script>
    <script src="./shared/js/common.js"></script>
    <script>
        // Initialize navigation
        initIncludes({
            activeNav: 'nav-dashboard',
            loadCSS: false,  // Already loaded via link tag
            loadJS: false    // Already loaded via script tag
        });

        const DATA_URL = './dashboard_analyse.json';

        async function loadStatus() {
            try {
                const data = await loadJSONData(DATA_URL);

                updateServerStatusTiles(data.server_status, data.system_status, data.timestamp);

                if (data.ib_status) {
                    updateIBStatus(data.ib_status);
                }

            } catch (error) {
                console.error('Fehler beim Laden des Status:', error);
                const statusContainer = document.getElementById('server-status');
                if (statusContainer) {
                    statusContainer.innerHTML = createStatusTile('Fehler', error.message, 'offline');
                }
            }
        }

        loadStatus();
        setInterval(loadStatus, 60000);
    </script>
</body>
</html>
